{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Spl\\\\Desktop\\\\fastreport_project\\\\Inform\\\\inform_frontend\\\\src\\\\App.js\";\nimport React, { useState, useEffect } from \"react\";\nimport './App.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nasync function postData(json, api) {\n  const res = await fetch(api, {\n    method: \"POST\",\n    headers: {\n      'content-type': 'application/json'\n    },\n    body: JSON.stringify(json)\n  });\n  return res;\n}\nconst App = ({\n  user_id,\n  program_no,\n  host\n}) => {\n  function sendAPI() {\n    var FileName;\n    postData({\n      Id: user_id\n    }, `${host}/api/pub/acad`).then(function (response) {\n      return response.json();\n    }).then(function (data) {\n      postData({\n        Acadno: data.id\n      }, `${host}/api/pub/date`).then(function (response) {\n        if (!response) throw \"不在時限內\";\n        return response.json();\n      }).then(function (data) {\n        if (data) {\n          var json = {};\n          json.syearEnd = data.syearEnd;\n          json.semEnd = data.semEnd;\n          json.StudentId = user_id;\n          postData(json, `${host}/api/Calculate`).then(function (response) {\n            return postData(json, `${host}/api/generate/inform`);\n          }).then(function (response) {\n            var FileNameEncode = response.headers.get('Content-Disposition').split('filename=')[1];\n            FileName = decodeURIComponent(FileNameEncode);\n            return response.blob();\n          }).then(function (blob) {\n            var url = window.URL.createObjectURL(blob);\n            var a = document.createElement('a');\n            a.href = url;\n            a.download = FileName;\n            document.body.appendChild(a);\n            a.click();\n            window.URL.revokeObjectURL(url);\n            document.body.removeChild(a);\n          }).catch(function (Error) {\n            console.log(Error);\n          });\n        } else alert(\"不在時限內\");\n      }).catch(function (Error) {\n        console.log(Error);\n      });\n    }).catch(function (Error) {\n      console.log(Error);\n    });\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"submit\",\n        onClick: sendAPI,\n        children: \"\\u9001\\u51FA\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 63,\n    columnNumber: 9\n  }, this);\n};\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","jsxDEV","_jsxDEV","postData","json","api","res","fetch","method","headers","body","JSON","stringify","App","user_id","program_no","host","sendAPI","FileName","Id","then","response","data","Acadno","id","syearEnd","semEnd","StudentId","FileNameEncode","get","split","decodeURIComponent","blob","url","window","URL","createObjectURL","a","document","createElement","href","download","appendChild","click","revokeObjectURL","removeChild","catch","Error","console","log","alert","className","children","onClick","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/Spl/Desktop/fastreport_project/Inform/inform_frontend/src/App.js"],"sourcesContent":["import React, {useState, useEffect} from \"react\";\nimport './App.css';\n\nasync function postData(json, api) {\n    const res = await fetch(api, {\n        method: \"POST\",\n        headers: {\n            'content-type': 'application/json'\n        },\n        body: JSON.stringify(json)\n    })\n    return res;\n}\n\nconst App = ({user_id, program_no, host}) => {\n    function sendAPI() {\n        var FileName;\n\n        postData({Id: user_id}, `${host}/api/pub/acad`).then(function (response) {\n            return response.json()\n        }).then(function (data) {\n            postData({Acadno: data.id}, `${host}/api/pub/date`)\n                .then(function (response) {\n                    if(!response)\n                        throw \"不在時限內\"\n                    return response.json()\n                }).then(function (data) {\n                if (data) {\n                    var json = {}\n                    json.syearEnd = data.syearEnd;\n                    json.semEnd = data.semEnd;\n                    json.StudentId = user_id;\n                    postData(json, `${host}/api/Calculate`)\n                        .then(function (response) {\n                            return postData(json, `${host}/api/generate/inform`);\n                        }).then(function (response) {\n                        var FileNameEncode = response.headers.get('Content-Disposition').split('filename=')[1];\n                        FileName = decodeURIComponent(FileNameEncode);\n                        return response.blob();\n                    }).then(function (blob) {\n                        var url = window.URL.createObjectURL(blob);\n                        var a = document.createElement('a');\n                        a.href = url;\n                        a.download = FileName;\n                        document.body.appendChild(a);\n                        a.click();\n                        window.URL.revokeObjectURL(url);\n                        document.body.removeChild(a);\n                    }).catch(function (Error) {\n                        console.log(Error);\n                    });\n                } else alert(\"不在時限內\");\n            }).catch(function (Error) {\n                console.log(Error);\n            });\n        }).catch(function (Error) {\n            console.log(Error);\n        });\n\n    }\n\n    return (\n        <div className=\"App\">\n            <div>\n                <button className=\"submit\" onClick={sendAPI}>送出</button>\n            </div>\n        </div>\n    );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Spl\\\\Desktop\\\\fastreport_project\\\\Inform\\\\inform_frontend\\\\src\\\\App.js\";\nimport React, { useState, useEffect } from \"react\";\nimport './App.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nasync function postData(json, api) {\n  const res = await fetch(api, {\n    method: \"POST\",\n    headers: {\n      'content-type': 'application/json'\n    },\n    body: JSON.stringify(json)\n  });\n  return res;\n}\nconst App = ({\n  user_id,\n  program_no,\n  server,\n  pub_port,\n  cal_port,\n  trans_port\n}) => {\n  function sendAPI() {\n    var FileName;\n    postData({\n      Id: user_id\n    }, `${server}:${pub_port}/api/pub/acad`).then(function (response) {\n      return response.json();\n    }).then(function (data) {\n      postData({\n        Acadno: data.Id\n      }, `${server}:${pub_port}/api/pub/date`).then(function (response) {\n        return response.json();\n      }).then(function (data) {\n        if (data) {\n          var json = {};\n          json.syearEnd = data.syearEnd;\n          json.semEnd = data.semEnd;\n          json.StudentId = user_id;\n          postData(json, `${server}:${cal_port}/api/Calculate`).then(function (response) {\n            return postData(json, `${server}:${trans_port}/api/generate`);\n          }).then(function (response) {\n            var FileNameEncode = response.headers.get('Content-Disposition').split('filename=')[1];\n            FileName = decodeURIComponent(FileNameEncode);\n            return response.blob();\n          }).then(function (blob) {\n            var url = window.URL.createObjectURL(blob);\n            var a = document.createElement('a');\n            a.href = url;\n            a.download = FileName;\n            document.body.appendChild(a);\n            a.click();\n            window.URL.revokeObjectURL(url);\n            document.body.removeChild(a);\n          }).catch(function (Error) {\n            console.log(Error);\n          });\n        } else alert(\"不在時限內\");\n      }).catch(function (Error) {\n        console.log(Error);\n      });\n    }).catch(function (Error) {\n      console.log(Error);\n    });\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"submit\",\n        onClick: sendAPI,\n        children: \"\\u9001\\u51FA\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 9\n  }, this);\n};\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","jsxDEV","_jsxDEV","postData","json","api","res","fetch","method","headers","body","JSON","stringify","App","user_id","program_no","server","pub_port","cal_port","trans_port","sendAPI","FileName","Id","then","response","data","Acadno","syearEnd","semEnd","StudentId","FileNameEncode","get","split","decodeURIComponent","blob","url","window","URL","createObjectURL","a","document","createElement","href","download","appendChild","click","revokeObjectURL","removeChild","catch","Error","console","log","alert","className","children","onClick","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/Spl/Desktop/fastreport_project/Inform/inform_frontend/src/App.js"],"sourcesContent":["import React, {useState, useEffect} from \"react\";\nimport './App.css';\n\nasync function postData(json, api) {\n    const res = await fetch(api, {\n        method: \"POST\",\n        headers: {\n            'content-type': 'application/json'\n        },\n        body: JSON.stringify(json)\n    })\n    return res;\n}\n\nconst App = ({user_id, program_no, server, pub_port, cal_port, trans_port}) => {\n    function sendAPI() {\n        var FileName;\n\n        postData({Id: user_id}, `${server}:${pub_port}/api/pub/acad`).then(function (response) {\n            return response.json()\n        }).then(function (data) {\n            postData({Acadno: data.Id}, `${server}:${pub_port}/api/pub/date`)\n                .then(function (response) {\n                    return response.json()\n                }).then(function (data) {\n                if (data) {\n                    var json = {}\n                    json.syearEnd = data.syearEnd;\n                    json.semEnd = data.semEnd;\n                    json.StudentId = user_id;\n                    postData(json, `${server}:${cal_port}/api/Calculate`)\n                        .then(function (response) {\n                            return postData(json, `${server}:${trans_port}/api/generate`);\n                        }).then(function (response) {\n                        var FileNameEncode = response.headers.get('Content-Disposition').split('filename=')[1];\n                        FileName = decodeURIComponent(FileNameEncode);\n                        return response.blob();\n                    }).then(function (blob) {\n                        var url = window.URL.createObjectURL(blob);\n                        var a = document.createElement('a');\n                        a.href = url;\n                        a.download = FileName;\n                        document.body.appendChild(a);\n                        a.click();\n                        window.URL.revokeObjectURL(url);\n                        document.body.removeChild(a);\n                    }).catch(function (Error) {\n                        console.log(Error);\n                    });\n                } else alert(\"不在時限內\");\n            }).catch(function (Error) {\n                console.log(Error);\n            });\n        }).catch(function (Error) {\n            console.log(Error);\n        });\n\n    }\n\n    return (\n        <div className=\"App\">\n            <div>\n                <button className=\"submit\" onClick={sendAPI}>送出</button>\n            </div>\n        </div>\n    );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
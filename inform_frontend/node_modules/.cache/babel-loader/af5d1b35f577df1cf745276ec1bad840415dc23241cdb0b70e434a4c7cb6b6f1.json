{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Spl\\\\Desktop\\\\fastreport_project\\\\Inform\\\\inform_frontend\\\\src\\\\App.js\";\nimport React, { useState, useEffect } from \"react\";\nimport './App.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nasync function postData(json, api) {\n  const res = await fetch(api, {\n    method: \"POST\",\n    headers: {\n      'content-type': 'application/json'\n    },\n    body: JSON.stringify(json)\n  });\n  return res;\n}\nconst App = ({\n  user_id,\n  program_no,\n  host\n}) => {\n  function sendAPI() {\n    var FileName;\n    postData({\n      Id: user_id\n    }, `${host}/api/pub/acad`).then(function (response) {\n      return response.json();\n    }).then(function (data) {\n      postData({\n        Acadno: data.id\n      }, `${host}/api/pub/date`).then(function (response) {\n        if (response.status === 204) throw new Error(\"不在時限內\");\n        return response.json();\n      }).then(function (data) {\n        var json = {};\n        json.syearEnd = data.syearEnd;\n        json.semEnd = data.semEnd;\n        json.StudentId = user_id;\n        postData(json, `${host}/api/Calculate`).then(function (response) {\n          return postData(json, `${host}/api/generate/inform`);\n        }).then(function (response) {\n          var FileNameEncode = response.headers.get('Content-Disposition').split('filename=')[1];\n          FileName = decodeURIComponent(FileNameEncode);\n          return response.blob();\n        }).then(function (blob) {\n          var url = window.URL.createObjectURL(blob);\n          var a = document.createElement('a');\n          a.href = url;\n          a.download = FileName;\n          document.body.appendChild(a);\n          a.click();\n          window.URL.revokeObjectURL(url);\n          document.body.removeChild(a);\n        }).catch(function (Error) {\n          console.log(Error);\n        });\n      }).catch(function (Error) {\n        console.log(Error);\n      });\n    }).catch(function (Error) {\n      console.log(Error);\n    });\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"submit\",\n        onClick: sendAPI,\n        children: \"\\u9001\\u51FA\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 9\n  }, this);\n};\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","jsxDEV","_jsxDEV","postData","json","api","res","fetch","method","headers","body","JSON","stringify","App","user_id","program_no","host","sendAPI","FileName","Id","then","response","data","Acadno","id","status","Error","syearEnd","semEnd","StudentId","FileNameEncode","get","split","decodeURIComponent","blob","url","window","URL","createObjectURL","a","document","createElement","href","download","appendChild","click","revokeObjectURL","removeChild","catch","console","log","className","children","onClick","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/Spl/Desktop/fastreport_project/Inform/inform_frontend/src/App.js"],"sourcesContent":["import React, {useState, useEffect} from \"react\";\nimport './App.css';\n\nasync function postData(json, api) {\n    const res = await fetch(api, {\n        method: \"POST\",\n        headers: {\n            'content-type': 'application/json'\n        },\n        body: JSON.stringify(json)\n    })\n    return res;\n}\n\nconst App = ({user_id, program_no, host}) => {\n    function sendAPI() {\n        var FileName;\n\n        postData({Id: user_id}, `${host}/api/pub/acad`).then(function (response) {\n            return response.json()\n        }).then(function (data) {\n            postData({Acadno: data.id}, `${host}/api/pub/date`)\n                .then(function (response) {\n                    if (response.status === 204)\n                        throw new Error(\"不在時限內\");\n                    return response.json()\n                }).then(function (data) {\n                var json = {}\n                json.syearEnd = data.syearEnd;\n                json.semEnd = data.semEnd;\n                json.StudentId = user_id;\n                postData(json, `${host}/api/Calculate`)\n                    .then(function (response) {\n                        return postData(json, `${host}/api/generate/inform`);\n                    }).then(function (response) {\n                    var FileNameEncode = response.headers.get('Content-Disposition').split('filename=')[1];\n                    FileName = decodeURIComponent(FileNameEncode);\n                    return response.blob();\n                }).then(function (blob) {\n                    var url = window.URL.createObjectURL(blob);\n                    var a = document.createElement('a');\n                    a.href = url;\n                    a.download = FileName;\n                    document.body.appendChild(a);\n                    a.click();\n                    window.URL.revokeObjectURL(url);\n                    document.body.removeChild(a);\n                }).catch(function (Error) {\n                    console.log(Error);\n                });\n            }).catch(function (Error) {\n                console.log(Error);\n            });\n        }).catch(function (Error) {\n            console.log(Error);\n        });\n\n    }\n\n    return (\n        <div className=\"App\">\n            <div>\n                <button className=\"submit\" onClick={sendAPI}>送出</button>\n            </div>\n        </div>\n    );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}